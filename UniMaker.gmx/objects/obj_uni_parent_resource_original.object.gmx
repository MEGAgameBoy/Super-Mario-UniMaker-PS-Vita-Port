<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_uni_sys_parent</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>obj_uni_saveload_data</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Recursos do UniMaker
move_snap(16,16);
image_speed = 0;

drop = false;

//Controles
drag = false;
drop_lock = false;

//Camada temporaria
layer = depth;

//Recurso original salvo
resource = obj_uni_resource_empty;

//Posição inicial do objeto
x_start = 0;
y_start = 0;

numb = 0;


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Agarrar (D'n'D)

//Se estiver segurando o objeto...
if(drag == true){
    
    //Se estiver na area de algum objeto, mas que não sejá sua própria area...
    if (place_meeting(obj_uni_creation_preview.x,obj_uni_creation_preview.y,obj_uni_parent_resource))
    &amp;&amp; !(place_meeting(obj_uni_creation_preview.x,obj_uni_creation_preview.y,id))
        //Impedir que coloque nesta area
        drop_lock = true;
    else 
        //Permitir que coloque nesta area
        drop_lock = false;
    
    //Por a frente de todos
    depth = -19;
    
    //Posicionar sprite principal no mouse.
    x = mouse_x-8;
    y = mouse_y-8;
    
    //Travar editor
    global.uni_play_lock = true; 
    
    //Loop
    alarm[0] = 1;
}
else{
    //Se estiver impedido de por em alguma area
    if (drop_lock == true){
        
        //Voltar para posição inicial
        x = x_start
        y = y_start
        
        //Alinhar na grade
        move_snap(16,16);
    }
    else{

        //Por na posição atual
        x = obj_uni_creation_preview.x;
        y = obj_uni_creation_preview.y;
        
        //Seguir a posição normal
        x = x;
        y = y;
  
        //Alinhar na grade
        move_snap(16,16);
        audio_playstop_sound(snd_uni_object_drop,0,false); 
    }
    //Desativar a var que impede/permite por objeto
    drop_lock = false;
    
    //Por na 'layer' original
    depth = layer;
    
    //Destravar editor
    global.uni_play_lock = false;
    
    //Parar 'Loop'
    alarm[0] = -1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Soltar
if (global.uni_cursor == 1){
    //Soltar objeto
    drag = false;
    
    //Voltar ao recurso antes usado
    global.uni_resource_create = resource;
    resource = obj_uni_resource_empty;
    
    //Voltar ao sprite normal do cursor
    global.uni_cursor = 0;
    with (obj_uni_cursor)
        event_user(0);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Apagar (Borracha Rápida)
if (global.uni_layout == true){
    if (mouse_x &gt; view_xview[0]+40)
    if (mouse_x &lt; view_xview[0]+391)
    if (mouse_y &gt; view_yview[0]+37) 
    if (mouse_y &lt; view_yview[0]+225){
        if(global.uni_cursor == 2)
        &amp;&amp;(global.uni_editor_activity == true)
            event_user(2);
    }
}
else{
    if (global.uni_cursor == 2)
    &amp;&amp;(global.uni_editor_activity == true)
        event_user(2);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Apagar/Agarrar

//Se nenhum recurso estiver sendo criado...
if (global.uni_resource_create == false){
    
    //Se o layout estiver vísivel...
    if (global.uni_layout == true){
        
        //Se estiver com o cursor dentro do limite do editor...
        if (mouse_x &gt; view_xview[0]+40) if (mouse_x &lt; view_xview[0]+391)
        if (mouse_y &gt; view_yview[0]+37) if (mouse_y &lt; view_yview[0]+225){
        
            //Se o editor estiver em atividade...
            if(global.uni_editor_activity == true){
                
                //Se o cursor estiver no modo de apagar...
                if (global.uni_cursor == 2)
                    event_user(2);
                
                //Mas se ele estiver no modo normal...
                else if (global.uni_cursor == 0){
                    
                    //Se o d'n'd de outros objetos e do próprio não estiver ativo...
                    if(obj_uni_parent_resource.alarm[0] == -1)
                    &amp;&amp;(alarm[0] == -1){
        
                        //Efeito sonoro
                        audio_playstop_sound(snd_uni_object_drag,0,false);
                        
                        //Salvar posição inicial
                        x_start = x;
                        y_start = y;
                        
                        //Salvar objeto sendo usado no momento para criar
                        resource = global.uni_select_resource;
                        global.uni_select_resource = obj_uni_resource_empty;
                        
                        //Agarrar
                        drag = true;
                        
                        //Mudar cursor
                        global.uni_cursor = 1;
                        with (obj_uni_cursor)
                            event_user(0);
                        
                        //Começar 'Loop'
                        alarm[0] = 1;
                    }
                }
            }
        }
    }
}
/*
///Apagar/Agarrar
if (global.uni_resource_create == false)
{
    if (global.uni_layout == true){
    if (mouse_x &gt; view_xview[0]+40)
    if (mouse_x &lt; view_xview[0]+391)
    if (mouse_y &gt; view_yview[0]+37) 
    if (mouse_y &lt; view_yview[0]+225){
        //if (global.create == false)
        
        if(global.uni_editor_activity == true){
            if (global.uni_cursor == 2)
                event_user(2);
            else if (global.uni_cursor == 0){
                if(obj_uni_parent_resource.alarm[0] == -1)
                &amp;&amp;(alarm[0] == -1){
                //global.create = false; //&lt;
                audio_playstop_sound(snd_uni_object_drag,0,false);
                x_start = x;
                y_start = y;
                drop = global.uni_select_resource;
                
                global.uni_select_resource = obj_uni_resource_empty;
                drag = true;
                global.uni_cursor = 1;
                alarm[0] = 1;
                with (obj_uni_cursor)
                    event_user(0);
                }
            }
        }
    }
else{
    if (global.uni_resource_create == false)
    &amp;&amp; (global.uni_editor_activity == true){
        if (global.uni_cursor == 2)
            event_user(2);
        else if (global.uni_cursor == 0){
            audio_playstop_sound(snd_uni_object_drag,0,false);
            x_start = x;
            y_start = y;
            drop = global.uni_select_resource;
            global.uni_select_resource = 0;
            drag = true;
            global.uni_cursor = 1;
            alarm[0] = 1;
            with (obj_uni_cursor)
                event_user(0);
        }
    }
}
}*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Apagar
instance_create(x,y,obj_smoke);
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Carregar dados
x=ds_list_find_value(global.uni_objects_datalist,global.uni_readpos);
global.uni_readpos+=1;
y=ds_list_find_value(global.uni_objects_datalist,global.uni_readpos);
global.uni_readpos+=1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Salvar dados
//Posição 'X'
ds_list_add(global.uni_objects_datalist,x);
//Posição 'Y'
ds_list_add(global.uni_objects_datalist,y);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Apagar se estiver fora do nível
if(drag == false)
    instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Desenho do sprite e painel

//Painel
if(drag == true){
    //Se puder por o objeto nesse local
    if(drop_lock == true)
        //Desenhar painel vermelho
        draw_sprite_ext(sprite_index,1,floor(mouse_x/16)*16,floor(mouse_y/16)*16,1,1,0,c_red,0.7);
    else
        //Desenhar painel branco
        draw_sprite_ext(sprite_index,1,floor(mouse_x/16)*16,floor(mouse_y/16)*16,1,1,0,c_white,0.7);
}

//Desenho do sprite
draw_sprite_ext(sprite_index,image_index,x,y,1,1,0,c_white,1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
