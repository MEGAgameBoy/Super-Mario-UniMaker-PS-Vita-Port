<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_uni_sys_parent</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_uni_parent_save</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Recursos do UniMaker
image_speed = 0;

//Coordenada frame
drawthm = 0;
drawthm_x = 0;
drawthm_y = 0;
drawthm_w = 16;
drawthm_h = 16;
drawthm_xoff = 0;
drawthm_yoff = 0;

//Controles
drag = false;
drop_lock = false;

//Camada temporaria
layer = depth;

//Posição inicial do objeto
x_start = 0;
y_start = 0;

//Desenho 
x_draw = x;
y_draw = y;

posx = 0;
posy = 0;

exception = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Agarrar (D'n'D)
///Agarrar (D'n'D)
if!(instance_exists(obj_uni_creation_preview)){
    
    //Voltar para posição inicial
    x = x_start
    y = y_start
    x_draw = x_start
    y_draw = y_start
           
    drop_lock = 0;
    
    global.uni_cursor = 0;
    with(obj_uni_cursor_sprite) event_user(0);
    global.resource_block = 0;
    
    instance_destroy();
    alarm[0] = -1;
    exit;
}

//Se estiver segurando o objeto...
if(drag == true){
    
    //Se estiver na area de algum objeto, mas que não sejá sua própria area...
    if (place_meeting(obj_uni_creation_preview.x,obj_uni_creation_preview.y,obj_uni_parent_resource))
    &amp;&amp; !(place_meeting(obj_uni_creation_preview.x,obj_uni_creation_preview.y,id))
        //Impedir que coloque nesta area
        drop_lock = true;
    else 
        //Permitir que coloque nesta area
        drop_lock = false;
    
    //Por a frente de todos
    depth = -19;
    
    //Posicionar sprite principal no mouse.
    x_draw = mouse_x-8;
    y_draw = mouse_y-8;
    x = floor(mouse_x/16)*16;
    y = floor(mouse_y/16)*16;
    
    //Travar editor
    global.uni_play_lock = true; 
    
    //Loop
    alarm[0] = 1;
}
else{
    //Se estiver impedido de por em alguma area
    if (drop_lock == true){
        
        //Voltar para posição inicial
        x = x_start
        y = y_start
        
        //Alinhar na grade
        move_snap(16,16);
    }
    else{

        //Por na posição atual
        x = obj_uni_creation_preview.x;
        y = obj_uni_creation_preview.y;
        
        //Seguir a posição normal
        x = x;
        y = y;
  
        //Alinhar na grade
        move_snap(16,16);
        audio_playstop_sound(snd_uni_object_drop,0,false); 
    }
    //Desativar a var que impede/permite por objeto
    drop_lock = false;
    
    //Por na 'layer' original
    depth = layer;
    
    //Retornar na posição do sprite
    x_draw = x;
    y_draw = y;
    
    //Destravar editor
    global.uni_play_lock = false;
    global.resource_block = 0;
    //Parar 'Loop'
    //alarm[0] = -1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Soltar
//if (global.uni_cursor == 1){
    //Soltar objeto
    drag = false;
    
    //Voltar ao recurso antes usado
    global.resource_block = 0;
    
    //Voltar ao sprite normal do cursor
    global.uni_cursor = 0;
    with (obj_uni_cursor)
        event_user(0);
//}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Apagar/Agarrar

//Se nenhum recurso estiver sendo criado...
if (global.uni_play == false)
and (global.uni_resource_create == false){
    
    //Se o layout estiver vísivel...
    if (global.uni_layout == true){
        
        //Se estiver com o cursor dentro do limite do editor...
        if (mouse_x &gt; view_xview[0]+40) if (mouse_x &lt; view_xview[0]+391)
        if (mouse_y &gt; view_yview[0]+37) if (mouse_y &lt; view_yview[0]+225){
        
            //Se o editor estiver em atividade...
            if(global.uni_editor_activity == true){
                
                //Se o cursor estiver no modo de apagar...
                if (global.uni_cursor == 2)
                    event_user(2);
                
                //Mas se ele estiver no modo normal...
                else if (global.uni_cursor == 0){
                    
                    //Se o d'n'd de outros objetos e do próprio não estiver ativo...
                    if(obj_uni_parent_resource.alarm[0] == -1)
                    &amp;&amp;(alarm[0] == -1){
        
                        //Efeito sonoro
                        audio_playstop_sound(snd_uni_object_drag,0,false);
                        
                        //Salvar posição inicial
                        x_start = x;
                        y_start = y;
                        
                        //Salvar objeto sendo usado no momento para criar
                        global.resource_block = 1;
                        
                        //Agarrar
                        drag = true;
                        
                        //Mudar cursor
                        global.uni_cursor = 1;
                        with (obj_uni_cursor)
                            event_user(0);
                        
                        //Começar 'Loop'
                        alarm[0] = 1;
                    }
                }
            }
        }
    }
    else{
                //Se o editor estiver em atividade...
            if(global.uni_editor_activity == true){
                
                //Se o cursor estiver no modo de apagar...
                if (global.uni_cursor == 2)
                    event_user(2);
                
                //Mas se ele estiver no modo normal...
                else if (global.uni_cursor == 0){
                    
                    //Se o d'n'd de outros objetos e do próprio não estiver ativo...
                    if(obj_uni_parent_resource.alarm[0] == -1)
                    &amp;&amp;(alarm[0] == -1){
        
                        //Efeito sonoro
                        audio_playstop_sound(snd_uni_object_drag,0,false);
                        
                        //Salvar posição inicial
                        x_start = x;
                        y_start = y;
                        
                        //Salvar objeto sendo usado no momento para criar
                        global.resource_block = 1;
                        
                        //Agarrar
                        drag = true;
                        
                        //Mudar cursor
                        global.uni_cursor = 1;
                        with (obj_uni_cursor)
                            event_user(0);
                        
                        //Começar 'Loop'
                        alarm[0] = 1;
                    }
                }
            }   
    }
}
/*
///Apagar/Agarrar
if (global.uni_resource_create == false)
{
    if (global.uni_layout == true){
    if (mouse_x &gt; view_xview[0]+40)
    if (mouse_x &lt; view_xview[0]+391)
    if (mouse_y &gt; view_yview[0]+37) 
    if (mouse_y &lt; view_yview[0]+225){
        //if (global.create == false)
        
        if(global.uni_editor_activity == true){
            if (global.uni_cursor == 2)
                event_user(2);
            else if (global.uni_cursor == 0){
                if(obj_uni_parent_resource.alarm[0] == -1)
                &amp;&amp;(alarm[0] == -1){
                //global.create = false; //&lt;
                audio_playstop_sound(snd_uni_object_drag,0,false);
                x_start = x;
                y_start = y;
                drop = global.uni_select_resource;
                
                global.uni_select_resource = obj_uni_resource_empty;
                drag = true;
                global.uni_cursor = 1;
                alarm[0] = 1;
                with (obj_uni_cursor)
                    event_user(0);
                }
            }
        }
    }
else{
    if (global.uni_resource_create == false)
    &amp;&amp; (global.uni_editor_activity == true){
        if (global.uni_cursor == 2)
            event_user(2);
        else if (global.uni_cursor == 0){
            audio_playstop_sound(snd_uni_object_drag,0,false);
            x_start = x;
            y_start = y;
            drop = global.uni_select_resource;
            global.uni_select_resource = 0;
            drag = true;
            global.uni_cursor = 1;
            alarm[0] = 1;
            with (obj_uni_cursor)
                event_user(0);
        }
    }
}
}*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Apagar (Borracha Rápida)
if (global.uni_layout == true)
and (global.uni_play == false){
    if (mouse_x &gt; view_xview[0]+40)
    if (mouse_x &lt; view_xview[0]+391)
    if (mouse_y &gt; view_yview[0]+37) 
    if (mouse_y &lt; view_yview[0]+225){
        if(global.uni_cursor == 2)
        &amp;&amp;(global.uni_editor_activity == true)
            event_user(2);
    }
}
else{
    if (global.uni_cursor == 2)
    &amp;&amp;(global.uni_editor_activity == true)
        event_user(2);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Apagar
instance_create(x,y,obj_smoke);
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
x_draw = x;
y_draw = y;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Desenho do sprite e painel
if(global.uni_play == 1)
    exit;

//Painel
if(drag == true){

    //Se puder por o objeto nesse local
    if(drop_lock == true)
        //Desenhar painel vermelho
        draw_sprite_ext(sprite_index,1,floor(mouse_x/16)*16,floor(mouse_y/16)*16,1,1,0,c_red,0.7);
    else
        //Desenhar painel branco
        draw_sprite_ext(sprite_index,1,floor(mouse_x/16)*16,floor(mouse_y/16)*16,1,1,0,c_white,0.7);
}

//Desenho do sprite
if(drawthm == 1){
    draw_sprite_part_ext(global.theme_spritesheet,global.uni_level_style,drawthm_x+(global.theme_customanim*208),drawthm_y,drawthm_w,drawthm_h,x_draw+drawthm_xoff,y_draw+drawthm_yoff,1,1,c_white,1);
}
else
    draw_sprite_ext(sprite_index,image_index,x_draw,y_draw,1,1,0,c_white,1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
