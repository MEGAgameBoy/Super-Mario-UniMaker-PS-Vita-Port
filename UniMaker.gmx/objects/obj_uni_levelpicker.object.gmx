<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_uni_filepicker</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-90</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Variables
file_choice = 0;
fade = 0;
event_user(1);
alarm[0] = 1;

global.editor = false;

//Pages
current_page = 1;
max_page = 1;
//Pages index is for draw function
page_index0=0;
page_index1=1;
page_index2=2;
page_index3=3;
page_index4=4;
page_index5=5;
page_index6=6;
page_index7=7;
page_index8=8;

file_list = ds_list_create();
file_index = 0;

//Loading
fname = "";
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///List files
var lister = file_find_first("\courses\*.unis", fa_directory);

while (lister != "")
{
 ds_list_add(file_list, + lister)//add the current file to the list
 file_index++;//index is for draw event
 lister = file_find_next();//read next file
}
file_find_close();//finish

show_debug_message(string(file_index));

//Pages initialisation
for(var i=9; i &lt; file_index; i+=9)
{
 max_page++;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create the level directory

if(!directory_exists("courses"))
{
 directory_create("courses");
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>other</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Quit menu
if(fade &lt;= 0){

    fade = 0;
    instance_destroy();
    alarm[1] = -1;
};
else{

    fade -= 0.10;
    alarm[1] = 1;
};

if(global.editor = true)
    global.is_menu = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Open menu
if(fade &gt;= 1){

    fade = 1;
    alarm[0] = -1;
};
else{

    fade += 0.10;
    alarm[0] = 1;
};

//To tell editor mario and editor object to not move when we select a level to load
if(global.editor = true)
    global.is_menu = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Controles

//CONFIRM
if(gamepad_button_check_pressed(0, gp_face1))
    event_user(3);

//Dpad
if(gamepad_button_check_pressed(0, gp_padd) &amp;&amp; file_choice &lt; 8 )
    file_choice++;
    
if(gamepad_button_check_pressed(0, gp_padu) &amp;&amp; file_choice &gt; 0 )
    file_choice--;

//Return button  
if(gamepad_button_check_pressed(0, gp_face2) &amp;&amp; alarm[0] == -1 &amp;&amp; alarm[1] == -1)
    alarm[1] = 1;

//pages
if(current_page &gt; 1 &amp;&amp; gamepad_button_check_pressed(0, gp_shoulderl))
{
 current_page--;
 page_index0 -=9;
 page_index1 -=9;
 page_index2 -=9;
 page_index3 -=9;
 page_index4 -=9;
 page_index5 -=9;
 page_index6 -=9;
 page_index7 -=9;
 page_index8 -=9;
}
if(current_page &lt; max_page &amp;&amp; gamepad_button_check_pressed(0, gp_shoulderr))
{
 current_page++;
 page_index0 +=9;
 page_index1 +=9;
 page_index2 +=9;
 page_index3 +=9;
 page_index4 +=9;
 page_index5 +=9;
 page_index6 +=9;
 page_index7 +=9;
 page_index8 +=9;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Load Level
if(fade &lt; 1)
    exit;  


//Defined the file path to "filename" varable
fname = "\courses\" + ds_list_find_value(file_list, file_choice + page_index0);


if (!is_undefined(ds_list_find_value(file_list, file_choice + page_index0)))//Check if the selected level exist
{
 if(global.editor == true)
 {
  //load in the editor
  
  //Destroy objects
  with(obj_uni_parent_save)
     instance_destroy();
         
  audio_stop_all();
  scr_uni_loadcopy(fname);
  scr_uni_level_load(fname);
  scr_uni_custom(fname,0);
  
  //Clean memory
  cleanmem();   
  
  //Add to the editor
  with(obj_uni_editor)
  {
   event_user(6);
   event_user(9);
  }
  
  //Play sound
  audio_play_sound(snd_uni_robot_saveload,0,false);
  
  alarm[1] = 1;
 }
 else
 { 
  //load
  scr_uni_loadcopy(fname);
  audio_stop_all();
  global.uni_loadlevel = fname;
  room_goto(rm_uni_player);
  lives = 3;
 }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw evrething
//reused settings code

//Parameters
draw_sprite_ext(spr_uni_filepicker,0,x,y,1,1,0,c_white,fade);
draw_set_font(global.font);
draw_set_halign(fa_left);
draw_set_alpha(fade);

//-----------------PAGE1------------------

//0
if(file_choice == 0)
   draw_set_color(c_yellow);
else
   draw_set_color(c_white);
 
if(!is_undefined(ds_list_find_value(file_list, page_index0)))
    draw_text(x+10,y+13, ds_list_find_value(file_list, page_index0));
    
//1
if(file_choice == 1)
   draw_set_color(c_yellow);
else
   draw_set_color(c_white);
   
if(!is_undefined(ds_list_find_value(file_list, page_index1)))
   draw_text(x+10,y+13*2, ds_list_find_value(file_list, page_index1));
    
//2
if(file_choice == 2)
   draw_set_color(c_yellow);
else
   draw_set_color(c_white);

if(!is_undefined(ds_list_find_value(file_list, page_index2)))   
    draw_text(x+10,y+13*3, ds_list_find_value(file_list, page_index2));

//3
if(file_choice == 3)
   draw_set_color(c_yellow);
else
   draw_set_color(c_white);

if(!is_undefined(ds_list_find_value(file_list, page_index3)))
    draw_text(x+10,y+13*4, ds_list_find_value(file_list, page_index3));
   
//4

if(file_choice == 4)
   draw_set_color(c_yellow);
else
   draw_set_color(c_white);

if(!is_undefined(ds_list_find_value(file_list, page_index4)))
    draw_text(x+10,y+13*5, ds_list_find_value(file_list, page_index4));
      
//5
if(file_choice == 5)
   draw_set_color(c_yellow);
else
   draw_set_color(c_white);

if(!is_undefined(ds_list_find_value(file_list, page_index5)))
    draw_text(x+10,y+13*6, ds_list_find_value(file_list, page_index5));
    
//6
if(file_choice == 6)
   draw_set_color(c_yellow);
else
   draw_set_color(c_white);
    
if(!is_undefined(ds_list_find_value(file_list, page_index6)))
    draw_text(x+10,y+13*7, ds_list_find_value(file_list, page_index6));

//7
if(file_choice == 7)
   draw_set_color(c_yellow);
else
   draw_set_color(c_white);

if(!is_undefined(ds_list_find_value(file_list, page_index7)))
    draw_text(x+10,y+13*8, ds_list_find_value(file_list, page_index7));


//8
if(file_choice == 8)
   draw_set_color(c_yellow);
else
   draw_set_color(c_white);

if(!is_undefined(ds_list_find_value(file_list, page_index8)))
    draw_text(x+10,y+13*9, ds_list_find_value(file_list, page_index8));

 
//Pages count
draw_set_color(c_white);
draw_text(x+100, y, "page " + string(current_page) + "/" + string(max_page));

//----------------------------------------

//Reset text
draw_set_color(c_white);
draw_set_halign(fa_left);
draw_set_alpha(1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
